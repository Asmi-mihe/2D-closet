<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mon Armoire - Authentication</title>
    <link rel="stylesheet" href="style.css"> <style>
        .auth-box {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            padding: 50px;
            border-radius: 40px;
            border: 3px solid white;
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 400px;
            align-items: center;
        }
        input {
            width: 100%;
            padding: 15px;
            border-radius: 30px;
            border: 2px solid white;
            background: rgba(255, 255, 255, 0.6);
            outline: none;
        }
    </style>
</head>
<body>
    <div class="main">
        <div class="right" style="width: 100%;">
            <div class="auth-box">
                <h2 id="title" style="font-family: 'Playfair Display'; font-style: italic;">Auth</h2>
                <input type="text" id="user" placeholder="Enter Username">
                <input type="password" id="pass" placeholder="Enter Password">
                <button class="front-btn" onclick="process()">Submit</button>
                <p id="error-msg" style="color: #800000; font-size: 14px; height: 10px;"></p>
                <a href="#" onclick="switchMode()" id="toggle" style="font-size: 12px; color: #333;">Switch</a>
            </div>
        </div>
    </div>

    <script>
        // Check if the user clicked 'Sign up' or 'Login'
        const params = new URLSearchParams(window.location.search);
        let isLoginMode = params.get('mode') !== 'signup';

        function updateDisplay() {
            document.getElementById('title').innerText = isLoginMode ? "Login" : "Sign Up";
            document.getElementById('toggle').innerText = isLoginMode ? "Need an account? Sign up" : "Already have an account? Login";
        }

        function switchMode() {
            isLoginMode = !isLoginMode;
            updateDisplay();
        }

        function process() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;
            const err = document.getElementById('error-msg');

            if (!u || !p) {
                err.innerText = "Please fill both fields.";
                return;
            }

            if (isLoginMode) {
                // Check if user exists in browser memory
                const storedPass = localStorage.getItem(u);
                if (storedPass === p) {
                    window.location.href = "menu.html"; // Success!
                } else {
                    err.innerText = "Invalid username or password.";
                }
            } else {
                // Save new user to browser memory
                if (localStorage.getItem(u)) {
                    err.innerText = "Username already taken!";
                } else {
                    localStorage.setItem(u, p);
                    alert("Account created! Now please Login.");
                    isLoginMode = true;
                    updateDisplay();
                }
            }
        }
        
        // Run on page load
        updateDisplay();
    </script>
</body>
</html>